package main

import (
	"github.com/gin-gonic/gin"
	"net/http"
)

// type AccountType struct {
// 	Checking string
// 	Savings  string
// }

type Account struct {
	Type          string `json:"type"`
	AccountNumber int    `json:"accountnumber"`
	BankName      string `json:"bankname"`
	RoutingNumber int    `json:"routingnumber"`
	Balance       int    `json:"balance"`
}

var accounts = []Account{
	{Type: "Checking", AccountNumber: 9988445, BankName: "Wells Fargo", RoutingNumber: 72456, Balance: 24500},
	{Type: "Savings", AccountNumber: 8877442, BankName: "Wells Fargo", RoutingNumber: 87432, Balance: 32500},
}

func main() {
	router := gin.Default()

	router.Run("localhost:8080")
}

func getAccounts(c *gin.Context) {
	c.IndentedJSON(http.StatusOK, accounts)
}

func postAccounts(c *gin.Context) {
	var newAccount Account

	if err := c.BindJSON(&newAccount); err != nil {
		return
	}

	accounts = append(accounts, newAccount)

	c.IndentedJSON(http.StatusCreated, newAccount)
}
